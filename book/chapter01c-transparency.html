<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>Transparência de Distribuição</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/styles/github.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Sumário</div>
<ul class="sectlevel1">
<li><a href="#_transparência_de_distribuição">1. Transparência de Distribuição</a>
<ul class="sectlevel2">
<li><a href="#_transparência_de_acesso">1.1. Transparência de Acesso</a></li>
<li><a href="#_transparência_de_localização">1.2. Transparência de Localização</a></li>
</ul>
</li>
<li><a href="#_transparência_de_migraçãomobilidade_e_relocação">2. Transparência de Migração/Mobilidade e Relocação</a></li>
<li><a href="#_transparência_de_replicação">3. Transparência de Replicação</a></li>
<li><a href="#_transparência_de_concorrência">4. Transparência de Concorrência</a></li>
<li><a href="#_transparência_a_falhas">5. Transparência a Falhas</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_transparência_de_distribuição">1. Transparência de Distribuição</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Como visto anteriormente, parte da definição de sistemas distribuídos é que eles normalmente se apresentam como um sistema único aos usuários, ocultando o fato de processos e recursos estarem fisica e muitas vezes geograficamente distribuídos <a href="#SDPP">[SDPP]</a>. Tal característica define o sistema como transparente <a href="#SDCP">[SDCP]</a>. Transparência neste contexto então significa que o programador e/ou usuário não pode ver ou identificar que o sistema é distribuído. As principais formas de transparência são: acesso, localização, migração/mobilidade, relocação, replicação, concorrência e falha. <a href="#SDCP">[SDCP]</a> <a href="#SDPP">[SDPP]</a></p>
</div>
<div class="sect2">
<h3 id="_transparência_de_acesso">1.1. Transparência de Acesso</h3>
<div class="paragraph">
<p>Visa ocultar diferenças na representação de dados e acesso a recursos quando estes são transmitidos de uma máquina para outra com arquiteturas e/ou sistemas operacionais diferentes <a href="#SDPP">[SDPP]</a>. Diferentes sistemas e arquiteturas de hardware podem adotar padrões diferentes de dados. Este é o caso dos padrões <em>big endian</em> e <em>little endian</em> que definem a ordem de bits em um byte. Tal padrão é chamado de <em>byte order</em> ou <em>endianness</em>. Processadores Intel adotaram <em>little endian</em> e muitos outros seguiram este padrão. Os protocolos TCP/IP seguem o <em>big endian</em>, também chamado de <a href="https://www.ibm.com/support/knowledgecenter/en/SSB27U_6.4.0/com.ibm.zvm.v640.kiml0/asonetw.htm"><em>network byte-order</em> (ordem de bytes da rede)</a>.</p>
</div>
<div class="paragraph">
<p>Por exemplo o valor decimal 1000 poderia ser representando, da direita pra esquerda, em diferentes ordens de bytes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><span class="image"><img src="../images/byteorder-little-endian.png" alt="byteorder little endian"></span>, sendo representado do dígito menos significativo pro mais significado (<em>little endian</em>, o formato que nós humanos usamos pra representar números);</p>
</li>
<li>
<p><span class="image"><img src="../images/byteorder-big-endian.png" alt="byteorder big endian"></span>, sendo representado do dígito mais significativo pro menos (<em>big endian</em>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Bits ou dígitos mais significativos são aqueles que têm maior valor. Se pegarmos um valor em base decimal como 4263, 4 é o mais significativo pois está na casa de milhares, enquanto 3 é o menos por estar na casa das unidades. Assim, nós humanos representamos números arábicos e romanos em <em>little endian</em>. Sem saber qual a ordem dos bytes, não há como dizer se um valor decimal recebido como 0001 equivale a 1 ou 1000. <a href="https://www.ibm.com/developerworks/library/l-ibm-xl-fortran-compiler/index.html">Este padrão determina de fato como os bytes são ordenados na memória</a>.</p>
</div>
<div class="paragraph">
<p>Como apresentado, a transmissão de dados usando TCP/IP é feita em <em>big endian</em> mas os processadores como Intel usam <em>little endian</em>. No entanto, ao usar ferramentas de alto nível como middlewares, não temos que nos preocupar com isso. Desta forma, tais middlwares fornecem transparência de acesso. Se estivessemos capturando dados diretamente da camada de rede (ou que foram obtidos de tal camada e gravados em arquivo), aí sim teríamos tais preocupações.</p>
</div>
<div class="paragraph">
<p>Diferentes linguagens de programação podem ter formatos distintos para números, strings, booleans e outros dados. Por exemplo, em C, boolean é representado como um número inteiro. Em Java temos um tipo boolean específico. Strings em C são um vetor de caracteres terminados com <code>\0</code>. Em Java não há tal caractere no final das Strings.</p>
</div>
<div class="paragraph">
<p>Em <a href="#SDCP">[SDCP]</a> ainda é citado que a transparência de acesso permite que não haja distinção nas operações para acesso a recursos locais ou remotos. Desta forma, nem o programador tem que usar operações (funções) diferentes para tais acessos. Os usuário e aplicativos não devem perceber se estão acessando um recurso local ou remoto.</p>
</div>
<div class="paragraph">
<p>Recursos como a <a href="https://support.apple.com/pt-br/HT206996">Otimização de Armazenamento</a> introduzido no macOS garantem transparência de acesso. O usuário salva um arquivo local e, caso o sistema comece a ficar com pouco espaço em disco, o arquivo é automaticamente movido para a nuvem, mas continua sendo acessado como se fosse um arquivo local.</p>
</div>
<div class="paragraph">
<p>Conveções de nomes de arquivos também devem ser ocultados de usuários e aplicações <a href="#SDPP">[SDPP]</a>. Servidores web fazem isso. Por exemplo, no Windows é usada \ para separar diretórios, enquanto no Linux é usada /. Mas na web, o padrão é / independente de qual seja o sistema operacional do servidor.</p>
</div>
</div>
<div class="sect2">
<h3 id="_transparência_de_localização">1.2. Transparência de Localização</h3>
<div class="paragraph">
<p>Visa ocultar dos usuários e aplicações a localização de um recurso <a href="#SDPP">[SDPP]</a>, ou seja, o conhecimento de sua localização física ou na rede (endereço IP) <a href="#SDCP">[SDCP]</a>. A localização física inclui localização geográfica e o servidor onde o recurso está disponível.</p>
</div>
<div class="paragraph">
<p>Uma das formas de se conseguir transparência de localização é atribuindo nomes lógicos aos recursos <a href="#SDPP">[SDPP]</a>, que funcionam como apelidos (<em>alias</em>). Os endereços <a href="https://pt.wikipedia.org/wiki/URL">URL</a> (<em>Uniform Resource Locator</em>) são a forma mais conhecida para se obter transparência de localização. Um endereço como <a href="http://google.com/index.html" class="bare">http://google.com/index.html</a> <strong>não</strong> indica: qual servidor hospeda o arquivo index.html, se tal arquivo sempre esteve neste servidor <a href="#SDPP">[SDPP]</a>, ou até mesmo se o arquivo está hospedado em vários servidores e o servidor mais próximo do usuário ou menos sobrecarregado atendeu à solicitação de acesso ao arquivo.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_transparência_de_migraçãomobilidade_e_relocação">2. Transparência de Migração/Mobilidade e Relocação</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Visa permitir que um recurso seja movido para outra localização sem afetar a forma como os usuários acessam tal recurso <a href="#SDPP">[SDPP]</a> nem o funcionamento de programas <a href="#SDCP">[SDCP]</a>. Se o recurso puder ser movido enquanto estiver em uso, sem que usuários ou aplicações percebam tal operação, então temos transparência de relocação <a href="#SDPP">[SDPP]</a>.</p>
</div>
<div class="paragraph">
<p>Servidores web por meio do protocolo HTTP permitem transparência de migração. Ao acessarmos uma página web como <a href="http://palmas.ifto.edu.br/cursos.html" class="bare">http://palmas.ifto.edu.br/cursos.html</a>, se o arquivo cursos.html foi movido para /cursos/index.html, podemos utilizar o código <a href="https://pt.wikipedia.org/wiki/HTTP_301">HTTP 301</a> no servidor para indicar que a página foi movida e redirecionar automaticamente o usuário para o novo endereço.</p>
</div>
<div class="paragraph">
<p>Uma das grandes vantagens da computação em nuvem é a transparência de migração e de relocação. Provedores de computação em nuvem tradicionalmente utilizam tecnologia de virtualização para que um servidor seja compartilhado por múltiplos clientes. Tal tecnologia utiliza máquinas virtuais (VMs) para permitir que cada cliente possa instalar as aplicações que desejar, sem interferir no ambiente de outros clientes. Os provedores realizam a migração de máquinas virtuais de um servidor para outro, garantindo que os usuários vão continuar acessando tais VMs da mesma forma que antes, tendo então transparência de migração.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Lembre-se que compartilhamento de recursos é uma das características de sistemas distribuídos.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Migração de VMs (<em>VM migration</em>) é uma tarefa rotineina na nuvem para permitir um uso mais eficiente dos recursos computacionais.
Por exemplo, se um servidor onde uma VM ou conjunto de VMs está executando está subutilizado, tais VMs podem ser migradas para outro servidor, desligando-se o anterior. Com isto, diminuimos a quantidade de servidores ligados e consequentemente custos com consumo de energia. Adicionalmente, o recurso de migração ao vivo de VMs (<em>live VM migration</em>) permite que uma VM seja migrada para outro servidor enquanto ela está em uso, garantindo transparência de relocação.</p>
</div>
<div class="paragraph">
<p>Em <a href="#SDPP">[SDPP]</a> é comentado que o uso de dispositivos móveis como laptops é um exemplo de transparência de relocação, onde os usuários podem ir de um lugar a outro sem ao menos se desconectar. No entanto, isto é mais uma realidade de dispositivos como smartphones conectados a redes móveis como 3G/4G. No caso de laptops usando WiFi, comumente a conexão cai ao sair de um <em>Access Point</em> para outro e o usuário realmente percebe a queda da conexão. Trabalhos como o <a href="http://repositorio.unb.br/bitstream/10482/10766/1/2012_ClaudiodeCastroMonteiro.pdf">protocolo SMIP</a> permitem mobilidade em redes WiFi e 3G/4G para evitar a perda de conexão. Com isto, temos de fato transparência de relocação entre diferentes tecnologias de redes.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_transparência_de_replicação">3. Transparência de Replicação</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Visa criar cópias de um recurso em diferentes locais para aumentar a disponibilidade ou desempenho, colocando uma cópia do recurso perto de onde ele é acessado, sem que os usuários, programadores ou aplicativos tenham conhecimento das réplicas <a href="#SDPP">[SDPP]</a> <a href="#SDCP">[SDCP]</a>. Isto implica que a transparência de replicação normalmente requer transparência de localização <a href="#SDPP">[SDPP]</a>.</p>
</div>
<div class="paragraph">
<p>Transparência de replicação é outro recurso fundamental da computação em nuvem. Em provedores que fornecem Software como Serviço (<em>Software as a Service - SaaS</em>), como é o caso da Google e seus diversos aplicativos, máquinas virtuais executando os softwares podem ser replicadas para atender a um aumento da demanda de usuários. No entanto, os usuários das aplicações não têm conhecimento da replicação de tais VMs. Um usuário do Brasil ao acessar um serviço como o GMail pode ser atendido por uma VM executando em um servidor no Brasil, enquanto um usuário na europa pode ser atendido por uma VM na europa. Mesmo dentro da europa, a solicitação de acesso à um serviço pode ser direcionada para uma VM no país mais próximo do usuário.</p>
</div>
<div class="paragraph">
<p>No caso da replicação de servidores web/servidores de aplicação, a transparência de replicação é conseguida por meio de um balanceador de carga, como discutido na seção de escalabilidade. Este vai determinar automaticamente para qual servidor um usuário será direcionado, sem que o usuário saiba que existem vários servidores.</p>
</div>
<div class="paragraph">
<p>No caso de bancos de dados replicados, a transparência de replicação é provida à aplicação pelo SBGD. A aplicação apenas envia ou recebe dados do banco, sem ter conhecimento da existência ou não de réplicas. Quando um dado é enviado ao banco, o SGBD é que lida com as réplicas.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_transparência_de_concorrência">4. Transparência de Concorrência</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Já sabemos que o compartilhamento de recursos em sistemas distribuídos traz muitas vantagens. Um exemplo é o compartilhamento colaborativo de documentos <a href="#SDPP">[SDPP]</a> com o Google Docs. No entanto, determinados recursos precisam ser compartilhados de forma competitiva (concorrente) <a href="#SDPP">[SDPP]</a>. Recursos escassos normalmente são compartilhados desta forma. Exemplos incluem recursos físicos como CPU. Em geral, um mesmo núcleo de uma CPU não pode ser usado simultaneamente por dois processos. Uma excessão são as CPUs atuais com tecnologia como <a href="https://pt.wikipedia.org/wiki/Hyper-threading">Hyper Threading</a>, que pemitem a um núcleo executar mais de uma tarefa simultaneamente (com suas devidas limitações). Como a quantidade de tarefas executadas por um sistema operacional é em geral maior que a quantidade de núcleos de CPU existentes, as tarefas precisam concorrer para usar a CPU.</p>
</div>
<div class="paragraph">
<p>Tradicionalmente, um sistema operacional permite que uma tarefa use a CPU por um determinado período de tempo (chamado de <em>quantum</em> ou <em>time slice</em>). Quando o tempo expira, a tarefa é pausada e vai para o final de uma fila. Em seguida, outra tarefa passa a usar aquele núcleo . Desta forma, a execução das tarefas é feita de forma alternada, que chamamos de <a href="https://pt.wikipedia.org/wiki/Preemptividade">preemptiva</a>. Os sistemas operacionais tornam transparente esta concorrência pela CPU. O programador não necessariamente tem que se preocupar com concorrência quando está criando uma aplicação convencional que utiliza apenas um núcleo da CPU. No entanto, quando o recurso de <em>Threads</em> é usado para permitir a execução de tarefas em paralelo por várias CPUs, podem surgir preocupações com concorrência e perder-se transparência. A transparência pode ser perdida, principalmente, quando o programador precisa programar uma tarefa para aguardar a finalização de outra e assim obter resultados. Frameworks como o Apache Hadoop que comentamos na seção de Escalabilidade permitem a execução de várias tarefas de forma concorrente, garantindo a transparência.</p>
</div>
<div class="paragraph">
<p>Problemas de concorrência também surgem frequentemente quando várias <em>Threads</em> tentam acessar ou alterar as mesmas variáveis. Nestes casos, resultados inesperados e inconsistentes podem ocorrer. Para resolver tais problemas, existem mecanismos nas linguagens de programação para permitir sincronizar a execução de tarefas. Em Java por exemplo, se um método sendo executado por várias <em>Threads</em> acessa variáveis comuns e precisamos impedir que tais <em>Threads</em> acessem estas variáveis ao mesmo tempo (pois isso pode causar resultados inesperados), podemos marcar o método com a palavra reservada <em>synchronized</em>.
Três aplicações de exemplo foram disponibilizadas que mostram como tal problema pode ocorrer e soluções para resolvê-los. Os exemplos são: <a href="../projects/ConcorrenciaAppProblemas.java">ConcorrenciaAppProblemas.java</a>, <a href="../projects/ConcorrenciaAppSolucao1.java">ConcorrenciaAppSolucao1.java</a> e <a href="../projects/ConcorrenciaAppSolucao2.java">ConcorrenciaAppSolucao2.java</a>.</p>
</div>
<div class="paragraph">
<p>Também existe concorrência quando múltiplos usuários tentam acessar um mesmo arquivo ou registro de um banco de dados. A transparência de concorrência faz com que um usuário não perceba que um recurso está sendo utilizado por outro usuário. Este acesso concorrente fica mais óbvio quando vários usuários tentam alterar simultaneamente um mesmo arquivo ou registro. <a href="#SDPP">[SDPP]</a> As alterações precisam ser sincronizadas para garantir que os dados se mantenham consistentes <a href="#SDPP">[SDPP]</a> e que as alterações de um usuário não interfiram nas de outro. Considere que dois usuários alteraram simultaneamente um arquivo e precisam salvar tais alterações como mostrado a seguir:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Documento Original</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Alterações do Usuário 1</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Alterações do Usuário 2</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">AAAAAAA<br>
 BBBBBBB<br>
 CCCCCCC<br>
 DDDDDDD<br></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1111111<br>
 BBBBBBB<br>
 CCCCCCC<br>
 DDDDDDD<br></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AAAAAAA<br>
 2222222<br>
 CCCCCCC<br>
 DDDDDDD</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Como podem ver, o usuário 1 alterou a primeira linha enquanto o usuário 2 alterou a segunda linha do arquivo. A concorrência neste caso pode fazer com que, o último usuário a salvar o arquivo faça as alterações do primeiro serem perdidas. O que poderíamos esperar é que as alterações de ambos os usuários fossem incluídas no arquivo, como mostrado a seguir.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Documento final esperado, contendo as alterações de ambos os usuários</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1111111<br>
2222222<br>
CCCCCCC<br>
DDDDDDD</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>A transparência de concorrência precisa lidar com tais tipos de problemas. Ela precisa ainda garantir que o recurso (neste caso o arquivo) se mantenha consistente <a href="#SDPP">[SDPP]</a>. Por exemplo, tentativas de alterações simultâneas <strong>não</strong> podem corromper o arquivo, tornando impossível ler seu conteúdo.</p>
</div>
<div class="paragraph">
<p><em>Locks</em> são mecanismos de trava muito utilizados para dar acesso exclusivo a um recurso para um usuário <a href="#SDPP">[SDPP]</a> <a href="#SDCP">[SDCP]</a> ou aplicação, criando uma fila de espera para tal recurso. O uso de <em>locks</em> evita os problemas apresentados acima, porém, traz uma grande perda de desempenho pois não podemos atender vários usuários simultaneamente. Isto prejudica enormente a escalabilidade do sistema.</p>
</div>
<div class="paragraph">
<p>Sem o uso de transações com <em>lock</em> em aplicações de banco de dados, a alteração de um mesmo registro por vários usuários pode resultar em um usuário sobrescrevendo os dados fornecidos por outro. Este é o conhecido problema da atualização perdida: as atualizações de um usuário são perdidas quando outro usuário atualiza um registro <a href="#SDCP">[SDCP]</a>. O vídeo a seguir exemplifica este problema.</p>
</div>
<div class="videoblock">
<div class="content">
<iframe width="640" height="300" src="https://www.youtube.com/embed/lJwAgEtpKmk?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div class="paragraph">
<p>Em <a href="#SDPP">[SDPP]</a> é discutido que um recurso mais adequado para resolver este problema são as transações. Transações são muito conhecidas em bancos de dados e garantem que, ao executar um conjunto de operações, ou todas as operações são executadas com sucesso ou nenhuma delas é confirmada. No entanto, o livro deixa entender que transações são uma alternativa aos <em>locks</em>, quando na verdade, elas utilizam <em>locks</em> para garantir consistência dos dados. De fato, bancos de dados como <a href="https://dev.mysql.com/doc/refman/8.0/en/innodb-locking-reads.html">MySQL</a> e <a href="https://www.postgresql.org/docs/9.5/sql-select.html#SQL-FOR-UPDATE-SHARE">PostgreSQL</a> permitem o uso de <em>locks</em> em transações para isto, por meio de comandos como <code>select &#8230;&#8203; for update</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Se você quiser verificar como funciona o mecanismo de <em>lock</em> do MySQL, pode acessar o script <a href="../projects/00-concorrencia/mysql-concurrency-lock.sh">mysql-concurrency-lock.sh</a>. Você apenas precisa ter o servidor MySQL instalado em uma máquina Linux/macOS. Ao executar o script com <code>sh mysql-concurrency-lock.sh</code> será mostrado como ele funciona e como deve proceder. Certifique-se de editar o script para informar a senha do usuário root do MySQL.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>O livro cita ainda que implementar tal recurso em sistemas distribuídos é bastante desafiador.
Mas é importante ficar claro que o desafio consiste em utilizar transações em um SGBD distribuído, onde um mesmo dado pode estar replicado em vários servidores. Imagine que uma atualização em um servidor precisa ser replicada pra outros servidores
e ainda garantindo que:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ou todos os servidores são atualizados;</p>
</li>
<li>
<p>ou em caso de erro, as alterações confirmadas em qualquer um sejam desfeitas.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>No caso de um banco de dados não distribuído, evitar o problema apresentado no vídeo acima é bem fácil. Bibliotecas de acesso a bancos de dados normalmente possuem recursos para lidar com alterações concorrentes, que são os <em>locks</em> otimistas e pessismistas.
Este é o caso da Java Persistence API (JPA) que vai aplicar mecanismos de lock de acordo com o banco de dados sendo utilizado.
O método otimista considera que alterações concorrentes ocorrem excepcionalmente. Tal método não usa <em>locks</em> do banco, mas normalmente requer um campo "versão" na tabela. Quando um usuário altera um registro em tal tabela, o número da versão daquele registro é automaticamente incrementando. Assim, se entre a leitura de um registro e a alteração do mesmo, a biblioteca detectar que o número de versão do registro mudou, é porque outro usuário alterou tal registro. Neste caso, é exibido um erro de modificação concorrente, indicando tal situação. Nestes casos, o usuário pode tentar novamente. [<a href="https://vladmihalcea.com/a-beginners-guide-to-java-persistence-locking/">1</a>, <a href="https://en.wikibooks.org/wiki/Java_Persistence/Locking">2</a>, <a href="https://www.baeldung.com/jpa-optimistic-locking">3</a>, <a href="https://www.baeldung.com/jpa-pessimistic-locking">4</a>, <a href="https://www.objectdb.com/java/jpa/persistence/lock">5</a>]</p>
</div>
<div class="paragraph">
<p>O vídeo a seguir apresenta o <em>locking</em> otimista.</p>
</div>
<div class="videoblock">
<div class="content">
<iframe width="640" height="300" src="https://www.youtube.com/embed/SALUHrZz2OQ?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div class="paragraph">
<p>O método pessimista considera que há maior probabilidade de modificações concorrentes. Assim, ele usa o recurso de <em>lock</em> do banco para travar um registro até que as operações feitas por um usuário sejam finalizadas. Nestes casos, como já sabemos, isto reduz a escalabilidade do sistema.</p>
</div>
<div class="paragraph">
<p>Modificações concorrentes podem ser um grande problema, principalmente em sistemas financeiros e bancários <a href="#SDCP">[SDCP]</a>. Sem o controle de concorrência, duas pessoas com cartões de uma mesma conta que possue apenas R$100,00 poderiam tentar sacar dinheiro duas vezes este valor.</p>
</div>
<div class="paragraph">
<p>Por fim, quando um <em>lock</em> é aplicado no banco de dados por um usuário, outros usuários tentando acessar o mesmo registro esperarão por um determinado tempo até que ocorra <em>timeout</em> <a href="#SDCP">[SDCP]</a>. Neste caso, o <em>timeout</em> é definido nas configurações do banco e/ou da conexão [<a href="https://dev.mysql.com/doc/refman/8.0/en/innodb-parameters.html#sysvar_innodb_lock_wait_timeout">1, </a> <a href="https://www.postgresql.org/docs/9.4/runtime-config-client.html:">2</a>].</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_transparência_a_falhas">5. Transparência a Falhas</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Permite ocultar falhas para que usuários e programas consigam finalizar suas tarefas, sem mesmo perceberem que a falha ocorreu <a href="#SDCP">[SDCP]</a>. Se um componente do sistema falhar, outro deve assumir automaticamente para tornar o sistema tolerante a falhas.
Assim como escalabilidade não é infinita, a tolerância a falhas também não. Um sistema com um nível de tolerância a falhas <em>k</em> é capaz de continuar em funcionamento mesmo após <em>k</em> falhas. Isto indica que ele precisa de pelo menos <em>k+1</em> elementos replicados (como servidores ou links de internet). Tal sistema é classificado como <a href="http://u.cs.biu.ac.il/~ariel/download/ds590/pdfs/chp08.pdf"><em>k-fault tolerant</em></a>. A tolerância neste caso também inclui os clientes e usuários <a href="#SDCP">[SDCP]</a>: o navegador envia uma requisição a um servidor e aguarda um determinado tempo pela resposta. Se o tempo expirar, ocorre <em>timeout</em> e uma mensagem de erro é exibida. Neste caso, o usuário tem a possibilidade de tentar novamente.</p>
</div>
<div class="paragraph">
<p>Replicação de componentes é um recurso apresentado para permitir a escalabilidade de um sistema, que também é fundamental para garantir tolerância a falhas. Com recursos como balanceamento de carga, quando um componente falha, as requisições dos usuários podem ser automaticamente redirecionadas para outro componente.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Para detalhes sobre computação em nuvem e balanceamento de carga, veja seções 2.1 e 2.2 nesta <a href="http://cloudsimplus.org/docs/MScDissertation-RaysaOliveira.pdf">dissertação de mestrado</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Há ainda preocupações com recuperação de falhas. Se o sistema estava no meio de um processo que não foi finalizado, o estado de tal processo pode ser salvo para que possa ser resumido do ponto onde parou. Se alterações de dados foram concluídas apenas parcialmente depois de uma falha, as transações de banco de dados garantem que tais operações incompletas não sejam confirmadas. Assim, o sistema volta a um estado consistente depois de reiniciar. No caso de dados de requisições enviados pelo cliente que não foram persistidos no banco, após a falha, o cliente tem a possibilidade de tentar novamente e re-enviar os dados.</p>
</div>
<div class="paragraph">
<p><span class="image"><a class="image" href="../"><img src="../images/back.png" alt="Voltar"></a></span></p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-05-24 13:02:27 UTC
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/highlight.min.js"></script>
<script>
if (!hljs.initHighlighting.called) {
  hljs.initHighlighting.called = true
  ;[].slice.call(document.querySelectorAll('pre.highlight > code[data-lang]')).forEach(function (el) { hljs.highlightBlock(el) })
}
</script>
</body>
</html>